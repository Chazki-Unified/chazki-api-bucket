---
openapi: 3.0.0
servers:
  - url: https://us-central1-chazki-link-dev.cloudfunctions.net/nintendo-cf-integrations/api
    description: Development server
  - url: https://us-central1-chazki-link-beta.cloudfunctions.net/nintendo-cf-integrations/api
    description: Beta server
  - url: https://us-central1-chazki-link.cloudfunctions.net/nintendo-cf-integrations/api
    description: Production server
info:
  version: 1.0.0
  description: |
    # Introduction
    Placeholder
    

  # version: 1.0.0
  title: Shopify API

tags:
  - name: RegisterServices
    description: List of endpoints to register a shop
  - name: OrderServices
    description: List of endpoints to manage orders

paths:
  /shopify/url-register:
    get:
      tags:
        - RegisterServices
      description: This endpoint redirects the user to a site in order to finish the integration
      operationId: url-register
      parameters:
        - "$ref": '#/components/parameters/queryshop'
      responses:
        200:
          "$ref": '#/components/responses/urlregister200'
  /shopify/code-client:
    get:
      tags:
        - RegisterServices
      description: 
        This endpoint completes the integration. Obtains data 
        needed to allow the communication between the API's.
        Register new endpoints that will be used by the shop when an order
        is generated. Also it redirects to the shop page.
      operationId: code-client
      requestBody:
        "$ref": '#/components/requestBodies/code-client'
      responses:
        400:
          "$ref": '#/components/responses/codeclient400'
  /shopify/register-webhook:
    post: 
      tags:
        - RegisterServices
      description:
        This endpoint allows a shop to recieve webhooks and register an endpoint in which the 
        webhook will be sent
      operationId: register-webhook
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": '#/components/schemas/DtoShopifyRegisterWebhookShopifyRequest'
      responses:
        200: 
          "$ref": '#/components/responses/registerwebhook200'
        400:
          "$ref": '#/components/responses/registerwebhook400'
        500:
          "$ref": '#/components/responses/registerwebhook500'
  /shopify/register-shipping-cost:
    post:
      tags:
        - RegisterServices
      description: 
        This endpoint register an endpoint in which 
        a 'shipping cost' query will be sent
      operationId: register-shipping-cost
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": '#/components/schemas/DtoShopifyRegisterShippingCostRequest'
      responses:
        200:
          "$ref": '#/components/responses/registershipcost200'
        400:
          "$ref": '#/components/responses/registershipcost400'
        500:
          "$ref": '#/components/responses/registershipcost500'
  /shopify/shipping-cost:
    post:
      tags:
        - OrderServices
      description: 
        This endpoint let the user obtain the shipping cost of a specific order
      operationId: shiping-cost
      parameters:
        - "$ref": '#/components/parameters/x-shopify-shop-domain-header'
      requestBody: 
        required: true
        content:
          application/json:
            schema:
              "$ref": '#/components/schemas/DtoShopifyShippingCostBody'
      responses:
        200:
          "$ref": '#/components/responses/shippingcost200'
        400:
          "$ref": '#/components/responses/shippingcost400'
  /shopify/send-webhook-shopify:
    post:
      tags:
        - OrderServices
      description: 
        This endpoint send a webhook to the shopify API.
      operationId: send-webhook-shopify
      parameters:
        - "$ref": '#/components/parameters/x-shopify-shop-domain-header'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": '#/components/schemas/DtoShopifyNotificationBodyFromNintendoRequest'
      responses:
        200:
          "$ref": '#/components/responses/sendwebhookshopify200'
        400:
          "$ref": '#/components/responses/sendwebhookshopify400'
  /shopify/order-receiver:
    post:
      tags:
        - orderservices
      description: 
        This endpoint recieves data from shopify for the purpose of creating an order
      operationId: order-receiver
      requestBody:
        required: true
        content:
          application/json:
            schema:
              "$ref": '#/components/schemas/DtoShopifyWebhookCreateOrderBody'
      responses:
        200:
          "$ref": '#/components/responses/orderreciever200'
        400:
          "$ref": '#/components/responses/orderreciever400'
components:
  schemas:
    DtoShopifyTokenRequest:
      type: object
      properties:
        code:
          type: string
          description: Code used to generate a shopify token for the first time.
          example: "XXXXXXXXXXXXXXXXXXXXXXX"
        hmac:
          type: string
          description: Security code that identifies an authentic shopify client.
          example: "XXXXXXXXXXXXXXXXXXXXXXXX"
        host:
          type: string
          description: Security code that is stored.
          example: "XXXXXXXXXXXXXXXXXXXXXXXX"
        state:
          type: string
          description: Security method that identifies a client from chazki to shopify.
          example: "s%3Apruebasintegracionmyshopifycomcreandochazki1015"
        shop:
          type: string
          description: Url that identifies a shop
          example: "https://pruebasintegracion.myshopify.com/"
        access_token:
          type: string
          description: Key that allows query responses
          example: "XXXXX_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
        enterpriseKey:
          type: string
          description: 
            Company identifier, it is a hash generated by Chazki to identify the company, 
            it is obtained once the company has been generated within Chazki by the commercial area.
          example: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
      required:
        - code
        - hmac
        - host
        - state
        - shop
    DtoShopifyRegisterWebhookShopifyRequest:
      type: object
      properties:
        shop:
          type: string
          description: Url that identifies a shop
          example: "https://pruebasintegracion.myshopify.com/"
        access_token:
          type: string
          description: Key that allows query responses
          example: "XXXXX_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
      required:
        - shop
        - access_token
    DtoWebhookSubscription:
      type: object
      properties:
        id:
          description: Code used as a identifier of a webhook subscription
          type: string
          example: 'xxxxxxxxxxxx'
    DtoShopifyRegisterShippingCostRequest:
      type: object
      properties:
        shop:
          type: string
          description: Url that identifies a shop
          example: "https://pruebasintegracion.myshopify.com/"
        access_token:
          type: string
          description: Key that allows query responses
          example: "XXXXX_XXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
      required:
        - shop
        - access_token
    DtoCarrierService:
      type: object
      properties:
        id: 
          type: string #can also be number
        name: 
          type: string
        active: 
          type: boolean
        service_discovery: 
          type: boolean
        carrier_service_type: 
          type: string
        admin_graphql_api_id: 
          type: string
        format: 
          type: string
        callback_url: 
          type: string
      required:
        - id
    DtoShopifyShippingCostResponse:
      type: object
      properties:
        shippingcost:
          type: array
          items:
            "$ref": '#/components/schemas/DtoShippingCostResponse'
    DtoShippingCostResponse:
      type: object
      properties:
        service_name:
          type: string
          description: Name of the service
          example: ''
        description: 
          description: ''
          type: string
          example: ''
        service_code: 
          type: string
        currency: 
          description: Currency used in the service
          type: string
          example: ''
        total_price: 
          description: Price of the service
          type: number
          example: ''
        phone_required:
          description: ''
          type: string
          example: ''
        min_delivery_date:
          description: ''
          type: string
          example: ''
        max_delivery_date: 
          description: ''
          type: string
          example: ''
      required:
        - service_name
        - description
        - service_code
        - currency
        - total_price
        - phone_required
        - min_delivery_date
        - max_delivery_date
    DtoLocationRate:
      type: object
      properties:
        country: 
          description: Country abbreviation for delivery
          type: string
          example: 'CL'
        postal_code: 
          description: Code to identify a zone 
          type: string
          example: 'XXXXXXX'
        province: 
          description: Province abbreviation for delivery
          type: string
          example: 'RM'
        city: 
          description: City for delivery
          type: string
          example: 'La Florida'
        name: 
          description: Person's contact name 
          type: string
          example: 'Juan Perez'
        address1: 
          type: string
          example: ''
        address2: 
          type: string
          example: ''
        address3: 
          type: string
          example: ''
        phone: 
          description: Person's contact number
          type: string
          example: 123456789
        fax: 
          type: string
          example: 
        email: 
          description: Person's email address
          type: string
          example: 'xxxxxxx@yyyyy.zzz'
        address_type: 
          type: string
          example: 
        company_name: 
          type: string
          example: 'XXXXXXXXXXXXX'
      required:
        - country
        - postal_code
        - province
        - city
        - name
        - address1
        - address2
        - address3
        - phone
        - fax
        - email
        - address_type
        - company_name      
    DtoItems:
      type: object
      properties:
        id: 
          description: Item identifier
          type: number
          example: 12345
        admin_graphql_api_id: 
          type: string
          example: ''
        destination_location: 
          type: string
          example: ''
        fulfillable_quantity: 
          type: number
          example: ''
        fulfillment_service: 
          type: string
          example: ''
        fulfillment_status: 
          type: string
          example: ''
        gift_card: 
          type: boolean
          example: ''
        grams: 
          description: Grams per item
          type: number
          example: '800'
        name: 
          description: Name of the item
          type: string
          example: 'XXXXXXXXXX'
        origin_location: 
          type: string
          example: ''
        price: 
          description: Price per item
          type: number
          example: '400'
        price_set: 
          type: string
          example: ''
        product_exists: 
          type: boolean
          example: ''
        product_id: 
          description: Number that identifies a product
          type: number
          example: 'xxxxxxxxxx'
        properties: 
          type: string
          example: ''
        quantity: 
          type: number
          example: ''
        requires_shipping: 
          description: Wether the item needs to me shipped or not
          type: boolean
          example: 'true'
        sku: 
          type: string
          example: ''
        taxable: 
          description: Wether the item is taxable or not
          type: boolean
          example: 'true'
        title: 
          type: string
          example: ''
        total_discount: 
          type: number
          example: ''
        total_discount_set: 
          type: string
          example: ''
        variant_id: 
          type: number
          example: 'xxxxxxxxxx'
        variant_inventory_management: 
          type: string
          example: ''
        variant_title: 
          type: string
          example: ''
        vendor: 
          type: string
          example: 'XXXXXXXXXX'
        tax_lines: 
          type: string
          example: ''
        duties: 
          type: string
          example: ''
        discount_allocations: 
          type: string
          example: ''
      required:
        - id
        - name
        - quantity
        - grams
        - price
        - product_id
        - variant_id
        - vendor
    DtoRateShipping:
      type: object
      properties:
        origin:
          "$ref": '#/components/schemas/DtoLocationRate'
        destination:
          "$ref": '#/components/schemas/DtoLocationRate'
        items:
          type: array
          items:
            "$ref": '#/components/schemas/DtoItems'
        currency:
          description: Abbreviation of the currency used in the payment.
          type: string
          example: 'PEN'
        locale:
          type: string
          example: ''
      required:
        - currency
        - locale
    DtoShopifyShippingCostBody:
      type: object
      properties:
        rate:
          type: object
          "$ref": '#/components/schemas/DtoRateShipping'
        currency:
          description: Abbreviation oof the currency used in the payment
          type: string
          example: 'PEN'
        locale:
          type: string
          example: ''
      required:
        - currency
        - locale
    DtoShopifyNotificationBodyFromNintendoRequest:
      type: object
      properties:
        timestamp: 
          description: ''
          type: string
          example: "2019-02-01T21:37:18.421Z"
        delivery_code: 
          description: Code identifier of the delivery. Also known as tracking code.
          type: string
          example: "4680858501355"
        delivery_status: 
          type: string
          example: "GOTO_PICK"
        url_delivery_code: 
          description: ''
          type: string
          example: "https://xxxxxxxxxx.xxxxx.com/trackcodeTracking/xxxxxxxxxxxx"
      required:
        - timestamp
        - delivery_code
        - delivery_status
        - url_delivery code
    DtoOrderNintendo:
      type: object
      properties:
        trackCode: 
          type: string
        paymentMethodID: 
          type: string
        paymentProofID:
          type:  string
        serviceID: 
          type: string
        packageEnvelope: 
          type: string
        packageWeight: 
          type: number
        packageSizeID: 
          type: string
        packageQuantity?: 
          type: number
        productDescription?: 
          type: string
        productPrice?: 
          type: number
        reverseLogistic?: 
          type: string
        crossdocking?: 
          type: string
        pickUpBranchID?: 
          type: string
        pickUpAddress?: 
          type: string
        pickUpPostalCode?: 
          type: string
        pickUpAddressReference?: 
          type: string
        pickUpPrimaryReference?: 
          type: string
        pickUpSecondaryReference?: 
          type: string
        pickUpNotes: 
          type: string
        pickUpContactName?: 
          type: string
        pickUpContactPhone?: 
          type: string
        pickUpContactDocumentTypeID?: 
          type: string
        pickUpContactDocumentNumber?: 
          type: string
        pickUpContactEmail?: 
          type: string
        dropBranchID?: 
          type: string
        dropAddress?: 
          type: string
        dropPostalCode?: 
          type: string
        dropAddressReference?: 
          type: string
        dropPrimaryReference?: 
          type: string
        dropSecondaryReference?: 
          type: string
        dropNotes?: 
          type: string
        dropContactName?: 
          type: string
        dropContactPhone?: 
          type: string
        dropContactDocumentTypeID?: 
          type: string
        dropContactDocumentNumber?: 
          type: string
        dropContactEmail?: 
          type: string
        pickUpPoint?: 
          type: array
          items:
            type: number
        dropPoint?: 
          type: array
          items:
            type: number
        packages?: 
          type: array
          items:
            "$ref": '#/components/schemas/DtoPackages'
      required:
        - trackCode
        - paymentMethodID
        - paymentProofID          
        - serviceID          
        - packageEnvelope          
        - packageWeight          
        - packageSizeID
    DtoPackages:
      type: object
      properties:
        ClientPackageID: 
          type: string
        envelope: 
          type: string
        weight: 
          type: number
        weightUnit: 
          type: string
        size: 
          type: number
        quantity: 
          type: number
        name: 
          type: string
        currency: 
          type: string
        unitaryProductPrice: 
          type: number
    DtoShopifyWebhookCreateOrderBody:
      type: object
      properties:
        id: 
          type: number
          description: |
            The globally-unique identifier of the Order in store within Shopify (used as trackCode)
          example: 4693237498081
        admin_graphql_api_id: 
          type: string
          description: The ID of the app in Shopify for graphQl.
          example: gid://shopify/Order/XXXXXXXXXXXXX
        app_id: 
          type: number
          description: The ID of the app that created the order.
          example: 580119
        buyer_accepts_marketing: 
          type: boolean
          description: Whether the customer agreed to receive marketing materials.
          example: false
        cancel_reason: 
          type: string
          description: |
            The reason provided when the order was canceled. 
            Returns null if the order wasn't canceled.
          example: null
        cancelled_at: 
          type: string
          description: |
            The date and time when the order was canceled. 
            Returns null if the order wasn't canceled.
          example: 'null'
        checkout_id: 
          type: number
          description: A unique value when referencing the checkout that's associated with the order.
          example: 32514734653665
        checkout_token: 
          type: string
          description: A unique value when referencing the checkout that's associated with the order.
          example: ba416ed5402868d5a0fec4089f27ds7e
        client_details: 
          type: object
          "$ref": '#/components/schemas/DtoClientDetails'
        closed_at: 
          type: string
          description: |
            The date and time (ISO 8601 format) when the order was closed. 
            Returns null if the order isn't closed.
          example: '2008-01-10T11:00:00-05:00'
        confirmed: 
          type: boolean
          description: Whether inventory has been reserved for the order.
          example: true
        contact_email: 
          type: string
          description: The email address associated with the customer or contact.
          example: "test@mail.example.com"
        created_at: 
          type: string
          description: |
            The autogenerated date and time (ISO 8601 format) when the order was created in Shopify. 
            The value for this property cannot be changed.
          example: "2012-03-13T16:09:55-04:00"
        currency: 
          type: string
          description: The three-letter code (ISO 4217 format) for the shop currency.
          example: CLP
        current_subtotal_price: 
          type: string
          description: |
            The current subtotal price of the order in the shop currency. 
            The value of this field reflects order edits, returns, and refunds.
          example: 100
        current_subtotal_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        current_total_discounts: 
          type: number
          description: |
            The current total discounts on the order in the shop currency. 
            The value of this field reflects order edits, returns, and refunds.
          example: 0
        current_total_discounts_set: 
          type: object
          description: |
            The current total discounts on the order in shop and presentment currencies. 
            The amount values associated with this field reflect order edits, returns, and refunds.
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        current_total_duties_set: 
          type: object
          description: |
            The current total duties charged on the order in shop and presentment currencies. 
            The amount values associated with this field reflect order edits, returns, and refunds.
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        current_total_price: 
          type: number
          description: |
            The current total price of the order in the shop currency. 
            The value of this field reflects order edits, returns, and refunds.
          example: 626
        current_total_price_set: 
          type: object
          description: |
            The current total price of the order in shop and presentment currencies. 
            The amount values associated with this field reflect order edits, returns, and refunds.
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        current_total_tax:
          type: number
          description: |
            The current total taxes charged on the order in the shop currency. 
            The value of this field reflects order edits, returns, or refunds.
          example: 19
        current_total_tax_set: 
          type: object
          description: |
            The current total taxes charged on the order in shop and presentment currencies. 
            The amount values associated with this field reflect order edits, returns, and refunds.
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        customer_locale: 
          type: string
          description: The two or three-letter language code, optionally followed by a region modifier.
          example: es
        device_id: 
          type: string
          description: The ID for the device.
          example: null
        discount_codes: 
          type: array
          description: |
            A list of discounts applied to the order. Each discount object includes the 
            following properties:
          items:
            type: object
            description: |
              'Information about the browser that the customer used when they placed their order:'
            properties:
              code:
                type: string
                description: |
                  When the associated discount application is of type code, 
                  this property returns the discount code that was entered at checkout. 
                  Otherwise this property returns the title of the discount that was applied.
                example: 'SPRING30'
              amount:
                type: string
                description: |
                  The amount that's deducted from the order total. 
                  When you create an order, this value is the percentage or monetary amount to deduct. 
                  After the order is created, this property returns the calculated amount.
                example: '30.00'
              type:
                type: string
                description: 'The type of discount. Default value: fixed_amount.'
                example: 'fixed_amount'
        email: 
          type: string
          description: The customer's email address.
          example: shopping@mail.example.com
        estimated_taxes: 
          type: boolean
          description: |
            Whether taxes on the order are estimated. 
            Many factors can change between the time a customer places an order and the 
            time the order is shipped, which could affect the calculation of taxes. 
            This property returns false when taxes on the order are 
            finalized and aren't subject to any changes.
          example: false
        financial_status: 
          type: string
          description: |
            The status of payments associated with the order. 
            Can only be set when the order is created.
          example: paid
        fulfillment_status: 
          type: string
          description: The order's status in terms of fulfilled line items.
          example: fulfilled
        gateway: 
          type: string
          description: The payment gateway used.
          example: shopify_payments
        name: 
          type: string
          description: |
            The order name, generated by combining the order_number property with the order 
            prefix and suffix that are set in the merchant's general settings. This is different 
            from the id property, which is the ID of the order used by the API. This field can 
            also be set by the API to be any string value.
          example: '#1032'
        note: 
          type: string
          description: An optional note that a shop owner can attach to the order.
          example: null
        note_attributes: 
          type: array
          description: |
            Extra information that is added to the order. Appears in the Additional 
            details section of an order details page. Each array entry must contain 
            a hash with name and value keys.
          items: 
            type: object
            properties:
              name:
                type: string
                example: custom name
              value:
                type: string
                example: custom value
        number: 
          type: number
          description: |
            The order's position in the shop's count of orders. Numbers are sequential and start at 1.
          example: 32
        order_number: 
          type: number
        order_status_url: 
          type: string
        original_total_duties_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        payment_gateway_names: 
          type: array
          items: 
            type: string
        phone: 
          type: string
        presentment_currency: 
          type: string
        processed_at: 
          type: string
        processing_method: 
          type: string
        subtotal_price: 
          type: number
        subtotal_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        tags: 
          type: string
        tax_lines: 
          type: object
          "$ref": '#/components/schemas/DtoTax'
        taxes_included: 
          type: boolean
        test: 
          type: boolean
        token: 
          type: string
        total_discounts: 
          type: number
        total_discounts_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        total_line_items_price: 
          type: number
        total_line_items_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        total_outstanding: 
          type: number
        total_price: 
          type: number
        total_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        total_price_usd: 
          type: number
        total_shipping_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        total_tax: 
          type: number
        total_tax_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        total_tip_received: 
          type: number
        total_weight: 
          type: number
        updated_at: 
          type: string
        user_id: 
          type: number
        billing_address: 
          type: object
          "$ref": '#/components/schemas/DtoAddress'
        customer: 
          type: object
          "$ref": '#/components/schemas/DtoCustomer'
        discount_applications: 
          type: array
          items: 
            type: object
        fulfillments: 
          type: array
          items: 
            type: string
        line_items: 
          type: array
          items:
            type: object
            "$ref": '#/components/schemas/DtoItems'
        payment_terms: 
          type: object
        refunds: 
          type: array
          items: 
            type: object
        shipping_address: 
          "$ref": '#/components/schemas/DtoAddress'
        shipping_lines: 
          type: array
          items:
            "$ref": '#/components/schemas/DtoShippingLine'
    DtoClientDetails:
      type: object
      description: 'Information about the browser that the customer used when they placed their order:'
      properties:
        accept_language: 
          type: string
          description: The languages and locales that the browser understands.
          example: 'es'
        browser_height: 
          type: string
          description: The browser screen height in pixels, if available.
          example: '900'
        browser_ip: 
          type: string
          description: The browser IP address.
          example: 'xxx.xxx.xxx.xxx'
        browser_width: 
          type: string
          description: The browser screen width in pixels, if available.
          example: '1000'
        session_hash: 
          type: string
          description: A hash of the session.
          example: '9ad4d1f4e6a8977b9dd98eed1e477643'
        user_agent: 
          type: string
          description: Details of the browsing client, including software and operating versions.
          example: 'Mozilla/X.0 (X11; Linux x86_64) AppleWebKit/xxxxx (KHTML, like Gecko) Chrome/xxxxxx Safari/xxxxx'
    DtoCurrentSubTotalPriceSet:
      type: object
      description: The current subtotal price of the order in shop and presentment currencies. The amount values associated with this field reflect order edits, returns, and refunds.
      properties:
        shop_money:
          type: object
          description: Amount in shop currency.
          "$ref": '#/components/schemas/DtoMoney'
        presentment_money:
          type: object
          description: Amount in presentment currency.
          "$ref": '#/components/schemas/DtoMoney'
    DtoMoney:
      type: object
      properties:
        amount: 
          type: number
          description: Decimal money amount.
          example: '100'
        currency_code: 
          type: string
          description: Currency of the money.
          example: 'CLP'
    DtoTax:
      type: object
      properties:
        price: 
          type: number
        rate: 
          type: number
        title: 
          type: string
        price_set: 
          type: object
          "$ref": '#/components/schemas/DtoCurrentSubTotalPriceSet'
        channel_liable: 
          type: boolean
    DtoAddress:
      type: object
      properties:
        id: 
          type: number
        customer_id: 
          type: number
        first_name: 
          type: string
        last_name: 
          type: string
        company: 
          type: string
        address1: 
          type: string
        address2: 
          type: string
        city: 
          type: string
        province: 
          type: string
        country: 
          type: string
        zip: 
          type: string
        phone: 
          type: string
        name: 
          type: string
        latitude: 
          type: number
        longitude: 
          type: number
        country_code: 
          type: string
        province_code: 
          type: string
        country_name: 
          type: string
        default: 
          type: boolean
    DtoCustomer:
      type: object
      properties:
        id: 
          type: number
        email: 
          type: string
        accepts_marketing: 
          type: boolean
        created_at: 
          type: string
        updated_at: 
          type: string
        first_name: 
          type: string
        last_name: 
          type: string
        orders_count: 
          type: number
        state: 
          type: string
        total_spent: 
          type: number
        last_order_id: 
          type: number
        note: 
          type: string
        verified_email: 
          type: boolean
        multipass_identifier: 
          type: number
        tax_exempt: 
          type: boolean
        phone: 
          type: string
        tags: 
          type: string
        last_order_name: 
          type: string
        currency: 
          type: string
        accepts_marketing_updated_at: 
          type: string
        tax_exemptions: 
          type: array
          items:
            type: string
        admin_graphql_api_id: 
          type: string
        default_address:
          type: object
          "$ref": '#/components/schemas/DtoAddress'
    DtoShippingLine:
      type: object
      properties:
        id: 
          type: number
        carrier_identifier: 
          type: string
        code: 
          type: string
        delivery_category: 
          type: string
        discounted_price: 
          type: number
        discounted_price_set: 
          type: object
          "$ref": '#/components/schemas/DtoMoney'
        phone: 
          type: string
        price: 
          type: number
        price_set: 
          type: object
          "$ref": '#/components/schemas/DtoMoney'
        requested_fulfillment_service_id: 
          type: object
        source: 
          type: string
        title: 
          type: string
        tax_lines: 
          type: array
          items:
            "$ref": '#/components/schemas/DtoTax'
        discount_allocations: 
          type: array 
  requestBodies:
    code-client:
      content:
        application/json:
          schema:
            properties:
              code:
                type: string
                description: Code used to generate a shopify token for the first time.
                example: "XXXXXXXXXXXXXXXXXXXXXXX"
              hmac:
                type: string
                description: Security code that identifies an authentic shopify client.
                example: "XXXXXXXXXXXXXXXXXXXXXXXX"
              host:
                type: string
                description: Security code that is stored.
                example: "XXXXXXXXXXXXXXXXXXXXXXXX"
              state:
                type: string
                description: Security method that identifies a client from chazki to shopify.
                example: "s%3Apruebasintegracionmyshopifycomcreandochazki1015"
              shop:
                type: string
                description: Url that identifies a shop
                example: "https://pruebasintegracion.myshopify.com/"
      required: true
  responses:
    urlregister200:
      description: Successfull operation
    codeclient400:
      description: Unsuccessfull response
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: false
              message: 
                type: string
                example: "ERROR_MSG"
    registerwebhook200:
      description: Successfull registration
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message: 
                type: string
                example: "REGISTERED WEBHOOK CORRECTLY."
              response: 
                type: object
                "$ref": '#/components/schemas/DtoWebhookSubscription'
    registerwebhook400:
      description: Unsuccessfull registration
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: true
              message:
                type: string
                example: 'ERRORS REGISTERING WEBHOOK.'
              response:
                type: object
                example: ''
    registerwebhook500:
      description: Unsuccessfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: true
              message:
                type: string
                example: 'INTERNAL SERVER ERROR'
    registershipcost200:
      description: Successfull registration
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message: 
                type: string
                example: "SUCCESS"
              response: 
                type: object
                "$ref": '#/components/schemas/DtoCarrierService'
    registershipcost400:
      description: Unsuccessfull registration
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: true
              response:
                type: object
                example: ''
    registershipcost500:
      description: Unsuccessfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: true
              message:
                type: string
                example: 'INTERNAL SERVER ERROR'
    shippingcost200:
      description: Successfull operation
      content:
        application/json:
          schema:
            "$ref": '#/components/schemas/DtoShippingCostResponse'
    shippingcost400:
      description: Unsuccessfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: false
              message:
                type: string
                example: ''
    sendwebhookshopify200:
      description: Successfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success: 
                type: boolean
                example: true
              message:
                type: string
                example: 'SEND WEBHOOK CORRECTLY.'
    sendwebhookshopify400:
      description: Unsuccessfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: 'ERROR_MSG'
    orderreciever200:
      description: Successfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: 'Order Generated'
              response:
                type: object
                "$ref": '#/components/schemas/DtoOrderNintendo'
    orderreciever400:
      description: Unsuccessfull operation
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              message:
                type: string
                example: 'ERROR_MSG'
  parameters:
    queryshop: 
      name: shop
      in: query
      description: Url that identifies a shop
      required: true
      style: form
      explode: false
      schema:
        type: string
    x-shopify-shop-domain-header:
      in: header
      name: 'x-shopify-shop-domain'
      schema:
        type: string
      example: 'https://pruebasintegracion.myshopify.com/'
